from metro_mapper.elements import create_map, lines

fg=10
hg=fg/2**0.5
qg=fg*(2**0.5-1)

g53=fg*5/3
g54=fg*5/4
g34=fg*3/4
g45=fg*4/5
g35=fg*3/5

mapdata={
    'style':{
        'grid':{
            'major':100,
            'minor':10,
            'color':'#444444'
        },
        'background': {
            'width':1600,
            'height':1600,
            'color':'#000000',
        },
        'fg':fg,
        'center':(1200,500),
        'gap':fg,
    },
    'lines':{
        'Bart':{
            'color':'#BBBB77',
            'width':fg/2,
            'points':[
                (1000,-130,10),
                (240+g53,-130,100),
                (-240,230+g54,100),
                (-240,640,10)
            ],
            'stops':[
                (180+g35,-85+g45),
                (100+g35,-25+g45),
                (0+g35,50+g45),
                (-120+g35,140+g45),
                (-240,415),
                (-240,640)
            ]
        },
        'M Line':{
            'color':'#00FF00',
            'width':fg/2,
            'points':[
                (150,250,10),
                (270,160,10),
                (270,-20+40/3,10),
                (200,-100,10),
                (-600,500,10)
            ],
            'stops':[
                (150,250),
                (230,190),
                (270,90),
                (260,-20),
                (180,-85),
                (100,-25),
                (0,50),
                (-120,140),
                (-220,215),
                (-380,335),
                (-480,410),
            ]
        },
        'F Line':{
            'color':'#FFFF00',
            'width':fg/2,
            'points':[
                (0,-360-fg,10),
                (-140+fg,-360-fg,10),
                (-140,-360,10),
                (-400,-360,10),
                (-400,315,10),
                (-300,415,10),
                (-70+g53,415,10),
                (270+g35,160+g45,20),
                (270+fg,160,20),
                (270+fg,-20+40/3,20),
                (270+g45,-20+40/3-g35,20),
                (5-g34+g54,-360-fg,10),
                (-80,-360-fg,fg/2),
                (-80,-360,fg/2),
                (5+g54,-360,10),
                (5+g54+g35,-360+g45,10),
            ],
            'stops':[
                (-200,-360),
                (-320,-360),
                (-400,-280-fg),
                (-400,-230),
                (-400,-100+fg),
                (-400,30),
                (-400,110),
                (-400,200),
                (-380+hg,335+hg),
                (-240-fg,415),
                (-70,415),
                (30+g53,340),
                (150+g35-g45,250+g45+g35),
                (230+g35,190+g45),
                (270+fg,90),
                (260+g45,-20-g35),
                (200+g45,-100-g35),
                (140+g45,-180-g35),
                (80+g45,-260-g35),
                (35+g45,-320-g35),
                (0,-360-fg),
                (0,-360),
            ]
        },
        # 'J Line':{
        #     'color':'#FF7700',
        #     'width':4,
        #     'points':[
        #         (-1000,170,10),
        #         (-190-2*hg,170,10),
        #         (-180,180+2*hg,10),
        #         (-180,400,10)
        #     ],
        #     'stops':[
        #         (-180-hg,180+hg),
        #     ]
        # },
        'C Line':{
            'color':'#FF0000',
            'width':fg/2,
            'points':[
                (220,1000,10),
                (220,290,10),
                (180,290,10),
                (0,50,10),
                (0,-220,10),
                (-20,-240,10),
                (-20,-340+fg,10),
                (0,-360+fg,10)
            ],
            'stops':[
                (220,610),
                (220,540),
                (220,470),
                (220,400),
                (220,330),
                (150+g35,250+g45),
                (120,210),
                (60,130),
                (0,50-fg),
                (0,-120+fg),
                (-10,-230),
                (0,-360+fg),
            ]
        },
        'C Line Ext':{
            'color':'#FF0000',
            'width':fg/2,
            'points':[
                (190-hg,-30-hg,10),
                (-20,-240,10),
                (-250,-240,10),
                (-290,-280,10),
                (-400,-280,10)
            ],
            'stops':[
                (190-hg,-30-hg),
                (100,-120),
                (-200,-240),
                (-400,-280)
                ]
        },
        'G Line':{
            'color':'#9933FF',
            'width':fg/2,
            'points':[
                (1000,320,10),
                (210-g54,330,10),
                (-15-g54,30,10),
                (-800,30,40),
                (-800,1000,10)
            ],
            'stops':[
                (180+fg,270),
                (150-g45,250+g35),
                (60-g45,130+g35),
                (0-g45,50+g35),
                (-200,30),
                (-400+fg,30),
                (-430,30),
                (-560,30),
                (-640,30),
            ]
        },
        'W Line':{
            'color':'#00FFFF',
            'width':fg/2,
            'points':[
                (190-2*hg,-30,10),
                (100-2*hg,-120,10),
                (-20,-120,10),
                (-40,-100,10),
                (-400,-100,10)
            ],
            'stops':[
                (190-2*hg,-30),
                (100-hg,-120+hg),
                (0,-120),
                (-100,-100),
                (-200,-100),
                (-300,-100),
                (-400,-100),
                ]
        },
        'CalTrain':{
            'color':'#AAAAAA',
            'width':fg/4,
            'points':[
                (160,1000,20),
                (160,430,20),
                (70-g35,310-g45,20),
                (230-g35,190-g45,20),
                (110,30,20),
                (270,-90,20),
                (1000,-90,20)
            ],
            'stops':[
                (160,570),
                (150-g35,250-g45),
                (190,-30)
            ]
        },
        'NewTrain':{
            'color':'#AAAAAA',
            'width':fg/4,
            'points':[
                (190,-30,20),
                (100,36,20),
                (100,100-g54,20),
                (60-50/3-g53,140,20),
                (-400,140,20)
            ],
            'stops':[
                (30,30-fg),
                (-60,60-fg)
            ]
        },
    },
}

drawing=create_map(mapdata, 'outputs/SanFrancisco_map.svg', grid=1)
linegroup=drawing.g(id='lines')
stopgroup=drawing.g(id='stops')
lines(mapdata, linegroup, stopgroup)
drawing.add(linegroup)
drawing.add(stopgroup)
drawing.save()